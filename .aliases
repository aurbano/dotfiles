alias p="ps -m -o pid,user,%mem,args"

# Sublime Text (only if installed)
if [[ -d "/Applications/Sublime Text.app" ]]; then
  alias st="/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl"
fi

alias hosts='sudo $EDITOR /etc/hosts'   # yes I occasionally 127.0.0.1 twitter.com ;)

# GIT STUFF

alias gclean='git branch --merged | grep -v "\*" | grep -v "master" | grep -v "main" | grep -v "develop" | grep -v "staging" | xargs -n 1 git branch -d'

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias localip="ipconfig getifaddr en0 2>/dev/null || ipconfig getifaddr en1"
alias ips="ifconfig -a | perl -nle'/(\d+\.\d+\.\d+\.\d+)/ && print $1'"

# All the dig info
alias dig="dig +nocmd any +multiline +noall +answer"

# Flush Directory Service cache
alias flush="dscacheutil -flushcache"
alias flushdns="sudo killall -HUP mDNSResponder;sudo killall mDNSResponderHelper;sudo dscacheutil -flushcache"

# Trim new lines and copy to clipboard
alias trimcopy="tr -d '\n' | pbcopy"

# Recursively delete `.DS_Store` files
alias cleanup="find . -name '*.DS_Store' -type f -ls -delete"

# File size
alias fs="stat -f \"%z bytes\""

# Empty the Trash on all mounted volumes and the main HDD
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; rm -rfv ~/.Trash"

# HTTP verbs (curl-based)
alias GET='curl -sS'
alias HEAD='curl -sS -I'
alias POST='curl -sS -X POST'
alias PUT='curl -sS -X PUT'
alias DELETE='curl -sS -X DELETE'

# Stop autocorrecting npm & yarn
alias npm='nocorrect npm'
alias yarn='nocorrect yarn'

# Modern tool aliases (guarded)
if command -v bat &>/dev/null; then
  alias cat='bat --paging=never'
fi

if command -v eza &>/dev/null; then
  alias ls='eza --group-directories-first'
  alias ll='eza -l --group-directories-first'
  alias la='eza -la --group-directories-first'
  alias lt='eza --tree --level=2'
fi

if command -v fd &>/dev/null; then
  alias find='fd'
fi
